<!DOCTYPE html>
<!-- saved from url=(0026)http://www.wpeng.xyz:7900/ -->
<html lang="zh">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <title>京东扫码</title>
    <!--添加标签图标-->
    <link id="favicon" rel="shortcut icon" href="https://ghproxy.com/https://raw.githubusercontent.com/Wpenga/myself/main/jdt.png" type="image/svg+xml">
</head>

<body style="height:100vh;width:100%;background-attachment:fixed;background-size: cover;-webkit-background-size: cover;-o-background-size: cover;background-image:url(https://api.dongmanxingkong.com/suijitupian/acg/1080p/index.php);background-repeat: no-repeat;background-position: center 0;">
    <div style="padding-top:10%;text-align:center;">
        <p>
            <img id="hd" src="http://www.wpeng.xyz:7900/" width="100">
        </p>
        <p style="position: relative;top: 10px; left: 0px;font-size:2vh;color:#fff;">
            <b></b> <br>
        </p>
        <div><img id="qrcode" height="170em" class="middle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAABlBMVEX///8AAABVwtN+AAADbklEQVR42uyZMY67PBDFn0Xh0jcIF4nwtSgigZSCa4FyEXMDly4Q79MbdjfZ7iv+IS7WFdr8kPB4/ObNLP7W3/rXK5J87PDcW05zm7lFhtKsJPdqgA7wjwSSKfvNZU+mQK7ZfjoJaDk91lwapoy4kvcdocQ1c6sLmC/giJZjQ/JOslzd2cCDuQAI1G/DkkJBZQDgZwSR2c+OHIEwze5XPrwZsLRfc7l1bZheHn7fiw8Dti7gfUmkdsGFQEy/VeS9QKdruZKjIknmckPLabugDHs1QNQBO8s0ZVzGsLd6JfsNZwEuYZgBb1fSAuiIPiaUr5SrAmDuI4lmSYHzxfaV/aH/ZwFo87A5+lEhjWS5dQjcJGtdNYCTrrb0o0IqcnMJqk2lmc8CAKl9UNxYIuk5Iw9MQLNXAziGsVkzR527RH6MUnvAb91ZQCS83IJKc98w874QvQLMuRrAJZaGGbdI9Ba8mHIf1/xzcd4PRIZpk8dTNdSV3Ewf9pdIfh7o2oxmZdEuLAFHR+Dqsr/PZwEAlOTcutZCSi6J09bypWp+HmjDaB5rIQsuAcNCDOS5gFVDz4XBHu7LoahPpf08ECUgtFuQBzOBdkESyg2nAYnKdhWaPDws95L5h2+1rwEApLQ8rLt2MVCvqDU7DZBics3k3MLrWdZ0etAarlqADix2uPGrY5WIeXvlNEAeWBXnJn2Ia7Z7OZqj6KoBYrJKpBhCjZhqk5UkM6rnAGofNkhIEUY1y+a4uJrrqwVwqtQpSMTU2gTcOnCMK/2IswAcXbMnv5vBuQ3lKvs3VwN0ONzg5hLHuIcy2OTqErjhLCCmwMce/OgY5OEtkhNfKk4FgB23HDtViVYr2bm/Xp6d2vsBFZq5taEZcG1Z9NlKued4oQKglfcj7zPCxGMOGSYy/+TD+wHr3J35hzBeEb7aZ332Xg/ArM7ZH42Y3OCsfeGldr8dOPosFn2t5V2zH2PGn7tZAaDV2NTFxo9SkmMg8+0GTwBsuigzPNvgmjpESta+K04NgE3+10Pkp9nlouPuY8LTaL0f+Po2fE0XrdmhzN6vyX8FgNS+a9Vf0G+Rss3h2dKeAswIlFvoGxLDjtzDPU1ODYD5B2gXHO2CuERuLvuX/2e9GbC0T1Dah0l/l9nrr+1LQ/p54G/9rf+//gsAAP//QdYKxIkAvmgAAAAASUVORK5CYII=">
        </div>
        <p style="font-size:2vh;color:#fff;">
            <b>扫码登陆</b> <br>
        </p>

        <p>
            <a style="position: relative;top: 20px; left: 0px;border-radius:8px;padding:6px 20px;font-size:2vh;color:#fff;border-style:solid;text-decoration:none;" id="jumpapp" href="http://www.wpeng.xyz:7900/#">京东APP登陆</a>
            <br><br><br>
        </p>

        <p>
            <a style="position: relative;top: 20px; left: 0px;border-radius:8px;padding:6px 20px;font-size:2vh;color:#fff;border-style:solid;text-decoration:none;" href="https://support.qq.com/products/344752/blog/508378">开启活动教程</a>
            <br>
        </p>
        <p style="position: relative;top: 20vh; left: 0px;text-align: center;font-size:2vh;color:#fff;">QQ联系:
            <a style="text-decoration:none;color:#fff;" href="https://qm.qq.com/cgi-bin/qm/qr?k=ZZMB6K6dJ8_-T5KnCI5hW7slyjmX9jTK&amp;noverify=0">✈️&nbsp;&nbsp;私聊求助&nbsp;✈️</a>
            <br>
            <a style="font-size:1.5vh;text-decoration:none;color:#fff;">扫码程序:
        <script>document.write(returnCitySN["cname"])</script>
        ©
        </a><a style="font-size:1.5vh;text-decoration:none;color:#fff;" href="https://github.com/cdle">Cdle作者</a>
            <a style="font-size:1.5vh;color:#fff;">&nbsp;网页源码:
        <script>document.write(returnCitySN["cname"])</script>
        ©
        </a><a style="font-size:1.5vh;text-decoration:none;color:#fff;">不知道</a>
            <a style="font-size:1.5vh;color:#fff;">&nbsp;最终修改:
        <script>document.write(returnCitySN["cname"])</script>
        ©
        </a><a style="font-size:1.5vh;text-decoration:none;color:#fff;">Eylin</a>
            <br>
            <a style="font-size:1vh;font-size:1vh;color:#fff;">程序版本 v1.0.1</a>
        </p>
        <script type="text/javascript" color="255,255,255" opacity="0.7" zindex="-2" count="200" src="./京东扫码_files/canvas-nest.min.js.下载"></script>
        <script src="./京东扫码_files/yinghua.js.下载"></script>

    </div><canvas id="c_n4" width="1707" height="740" style="position: fixed; top: 0px; left: 0px; z-index: -2; opacity: 0.7;"></canvas>

    <script>
        var timer;
        var qrcode = document.getElementById("qrcode")
        var loginUrl = ""
        var success = "https://ghproxy.com/https://raw.githubusercontent.com/cdle/jd_study/main/xdd/static/ok.svg";
        var jumpapp = document.getElementById('jumpapp')
        var hd = document.getElementById("hd")

        function showQrcode() {
            var xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    data = JSON.parse(xmlhttp.responseText)
                    if (data.url && data.url.indexOf("http") != -1) {
                        qrcode.src = "data:image/png;base64," + data.img
                        loginUrl = data.url
                    } else {
                        showQrcode()
                    }
                }
            }
            xmlhttp.open("GET", "/api/login/qrcode", true);
            xmlhttp.send();
        }
        showQrcode()

        function login() {
            var xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var results = xmlhttp.responseText
                    console.log(results)
                    switch (results) {
                        case "授权登录未确认":
                            break;
                        case "登录":
                            hd.style.visibility = "hidden";
                            qrcode.src = success
                            clearInterval(timer)
                            setTimeout(() => {
                                window.location.href = "/admin"
                            }, 1000);
                            break;
                        case "成功":
                            hd.style.visibility = "hidden";
                            qrcode.src = success
                            clearInterval(timer)
                            break;
                        default:
                            showQrcode()
                            break;
                    }
                }
            }
            xmlhttp.open("GET", "/api/login/query", true);
            xmlhttp.send();
        }

        function polling() {
            timer = setInterval(() => {
                login()
            }, 1500);
        }
        polling()

        jumpapp.addEventListener('click', function() {
            if (loginUrl) {
                window.location.href = `openapp.jdmobile://virtual/ad?params=${encodeURI(
                JSON.stringify({
                    category: 'jump',
                    des: 'ThirdPartyLogin',
                    action: 'to',
                    onekeylogin: 'return',
                    url: loginUrl,
                    authlogin_returnurl: 'weixin://',
                    browserlogin_fromurl: window.location.host,
                })
            )}`;
            } else {
                alert('还没加载好，请稍后重试');
            }
        })
    </script>


</body>

</html>
